{"version":3,"file":"js/293.e99a7295.js","mappings":"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","sources":["webpack://vueproj_beauty/./src/views/CartView.vue","webpack://vueproj_beauty/./src/views/CartView.vue?73a2"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <!-- <h2>購物車</h2> -->\r\n    <div class=\"text-end\">\r\n      <button class=\"btn btn-outline-danger\" type=\"button\" @click=\"deleteAllCart\" :disabled=\"cartData.carts.length === 0\" >\r\n        清空購物車\r\n      </button>\r\n    </div>\r\n    <table class=\"table align-middle\">\r\n      <thead>\r\n        <tr>\r\n          <th></th>\r\n          <th>品名</th>\r\n          <th style=\"width: 150px\">數量/單位</th>\r\n          <th>單價</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <template v-if=\"cartData.carts\">\r\n          <tr v-for=\"item in cartData.carts\" :key=\"item.id\">\r\n            <td>\r\n              <button type=\"button\" class=\"btn btn-outline-danger btn-sm\" @click=\"deleteCart(item.id)\">\r\n                <i class=\"fas fa-spinner fa-pulse\" v-show=\"isLoadingID === item.id\"></i>x\r\n              </button>\r\n            </td>\r\n            <td>\r\n              {{ item.product.title }}\r\n              <div class=\"text-success\" v-if=\"item.coupon\">已套用優惠券</div>\r\n            </td>\r\n            <td>\r\n              <div class=\"input-group input-group-sm\">\r\n                <div class=\"input-group mb-3\">\r\n                  <input min=\"1\" type=\"number\" class=\"form-control\" v-model.number=\"item.qty\" @blur=\"updateCart(item)\" :disabled=\"isLoadingID === item.id\"/>\r\n                  <span class=\"input-group-text\" id=\"basic-addon2\">{{item.product.unit}}</span>\r\n                </div>\r\n              </div>\r\n            </td>\r\n            <td class=\"text-end\">\r\n              <small class=\"text-success\">折扣價：</small>{{ item.product.price }}\r\n            </td>\r\n          </tr>\r\n        </template>\r\n      </tbody>\r\n      <tfoot>\r\n        <tr>\r\n          <td colspan=\"3\" class=\"text-end\">總計</td>\r\n          <td class=\"text-end\">{{ cartData.total }}</td>\r\n        </tr>\r\n        <tr v-if=\"cartData.final_total !== cartData.total\">\r\n          <td colspan=\"3\" class=\"text-end text-success\">折扣價</td>\r\n          <td class=\"text-end text-success\">{{ cartData.final_total }}</td>\r\n        </tr>\r\n      </tfoot>\r\n    </table>\r\n    <div class=\"my-5 row justify-content-center\">\r\n      <v-form ref=\"form\" class=\"col-md-6\" v-slot=\"{ errors }\" @submit=\"createOrder\">\r\n        <div class=\"mb-3\">\r\n          <label for=\"email\" class=\"form-label\">Email</label>\r\n          <v-Field id=\"email\" name=\"email\" type=\"email\" class=\"form-control\" :class=\"{ 'is-invalid': errors['email'] }\" placeholder=\"請輸入 Email\" rules=\"email|required\" v-model=\"form.user.email\"></v-Field>\r\n          <error-message name=\"email\" class=\"invalid-feedback\"></error-message>\r\n        </div>\r\n\r\n        <div class=\"mb-3\">\r\n          <label for=\"name\" class=\"form-label\">收件人姓名</label>\r\n          <v-field id=\"name\" name=\"姓名\" type=\"text\" class=\"form-control\" :class=\"{ 'is-invalid': errors['姓名'] }\" placeholder=\"請輸入姓名\" rules=\"required\" v-model=\"form.user.name\"></v-field>\r\n          <error-message name=\"姓名\" class=\"invalid-feedback\"></error-message>\r\n        </div>\r\n\r\n        <div class=\"mb-3\">\r\n          <label for=\"tel\" class=\"form-label\">收件人電話</label>\r\n          <v-field id=\"tel\" name=\"電話\" type=\"text\" class=\"form-control\" :class=\"{ 'is-invalid': errors['電話'] }\" placeholder=\"請輸入電話\" rules=\"required|min:8|max:10\" v-model=\"form.user.tel\"></v-field>\r\n          <error-message name=\"電話\" class=\"invalid-feedback\"></error-message>\r\n        </div>\r\n\r\n        <div class=\"mb-3\">\r\n          <label for=\"address\" class=\"form-label\">收件人地址</label>\r\n          <v-field id=\"address\" name=\"地址\" type=\"text\" class=\"form-control\" :class=\"{ 'is-invalid': errors['地址'] }\" placeholder=\"請輸入地址\" rules=\"required\" v-model=\"form.user.address\"></v-field>\r\n          <error-message name=\"地址\" class=\"invalid-feedback\"></error-message>\r\n        </div>\r\n\r\n        <div class=\"mb-3\">\r\n          <label for=\"message\" class=\"form-label\">留言</label>\r\n          <textarea id=\"message\" class=\"form-control\" cols=\"30\" rows=\"10\" v-model=\"form.message\"></textarea>\r\n        </div>\r\n        <div class=\"text-end\">\r\n          <button type=\"submit\" class=\"btn btn-danger\" :disabled=\"Object.keys(errors).length > 0 || cartData.carts.length === 0\">送出訂單</button>\r\n        </div>\r\n      </v-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport emitter from '@/utils/emitter'\r\nexport default {\r\n  data () {\r\n    return {\r\n      cartData: {\r\n        carts: []\r\n      },\r\n      isLoadingID: '',\r\n      form: {\r\n        user: {\r\n          name: '',\r\n          email: '',\r\n          tel: '',\r\n          address: ''\r\n        },\r\n        message: ''\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    getCarts () {\r\n      this.$http.get(process.env.VUE_APP_API + '/api/' + process.env.VUE_APP_PATH + '/cart')\r\n        .then((res) => {\r\n          this.cartData = res.data.data\r\n        })\r\n    },\r\n    updateCart (item) {\r\n      const data = {\r\n        product_id: item.id,\r\n        qty: item.qty\r\n      }\r\n      this.$http.put(process.env.VUE_APP_API + '/api/' + process.env.VUE_APP_PATH + '/cart/' + item.id, { data })\r\n        .then((res) => {\r\n          this.getCarts()\r\n          // this.isLoadingID = ''\r\n          emitter.emit('get-cart')\r\n          alert(res.data.message)\r\n        })\r\n    },\r\n    deleteCart (id) {\r\n      this.isLoadingID = id\r\n      this.$http.delete(process.env.VUE_APP_API + '/api/' + process.env.VUE_APP_PATH + '/cart/' + id)\r\n        .then((res) => {\r\n          this.getCarts()\r\n          // this.isLoadingID = ''\r\n          emitter.emit('get-cart')\r\n          alert(res.data.message)\r\n        })\r\n    },\r\n    deleteAllCart () {\r\n      this.$http.delete(process.env.VUE_APP_API + '/api/' + process.env.VUE_APP_PATH + '/carts')\r\n        .then((res) => {\r\n          this.getCarts()\r\n          // this.isLoadingID = ''\r\n          emitter.emit('get-cart')\r\n          alert(res.data.message)\r\n        })\r\n    },\r\n    createOrder () {\r\n      const order = this.form\r\n      this.$http.post(process.env.VUE_APP_API + '/api/' + process.env.VUE_APP_PATH + '/order', { data: order })\r\n        .then((res) => {\r\n          alert(res.data.message)\r\n          this.$refs.form.resetForm()\r\n          // this.deleteAllCart();\r\n          this.getCarts()\r\n          // this.isLoadingID = ''\r\n          emitter.emit('get-cart')\r\n        })\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getCarts()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./CartView.vue?vue&type=template&id=22bd36c4\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\Self-Study\\\\2022_VueJs\\\\Homework\\\\Project\\\\vueproj_beauty\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","id","colspan","for","_createElementBlock","type","onClick","$options","disabled","$data","carts","length","_hoisted_3","_hoisted_5","_Fragment","key","_renderList","item","product","title","coupon","min","qty","$event","onBlur","_toDisplayString","unit","_hoisted_15","price","_hoisted_16","total","final_total","_hoisted_18","_hoisted_19","_createVNode","_component_v_form","ref","onSubmit","errors","_hoisted_23","_component_v_Field","name","placeholder","rules","user","email","_component_error_message","_hoisted_25","_component_v_field","_hoisted_27","tel","_hoisted_29","address","_hoisted_31","cols","rows","message","Object","keys","_hoisted_33","data","cartData","isLoadingID","form","methods","getCarts","this","$http","get","process","then","res","updateCart","product_id","put","emitter","alert","deleteCart","delete","deleteAllCart","createOrder","order","post","$refs","resetForm","mounted","__exports__","render"],"sourceRoot":""}